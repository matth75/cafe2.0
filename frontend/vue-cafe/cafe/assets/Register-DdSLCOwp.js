import{d as w,y as x,r as f,b as d,e as t,f as C,q as n,z as i,t as u,A as k,p as v,l as c,k as V,w as q,m as U,i as m,B as K,_}from"./index-B6v4qw03.js";const N={class:"content"},B={class:"row gtr-50 gtr-uniform"},R={class:"col-6 col-12-small"},z={class:"col-6 col-12-small"},E={class:"col-6 col-12-small"},I={class:"col-6 col-12-small"},M={class:"col-6 col-12-small"},S={class:"col-6 col-12-small"},h={class:"col-6 col-12-small"},A={class:"actions"},D=["disabled"],L=["disabled"],j=w({__name:"Register",setup(F){const o=x({login:"",email:"",nom:"",prenom:"",hpwd:"",superuser:!1,teacher:!1,noteKfet:"",birthday:"",promo_id:""}),r=f(!1),s=f(null);function b(a){return a&&typeof a=="object"&&"response"in a&&a.response?.data?.detail?a.response.data.detail:a instanceof Error?a.message:"Impossible de créer le compte pour le moment."}function p(a=!0){o.login="",o.email="",o.nom="",o.prenom="",o.hpwd="",o.superuser=!1,o.teacher=!1,o.noteKfet="",o.birthday="",o.promo_id=!1,a&&(s.value=null)}async function y(){if(!r.value){r.value=!0,s.value=null;try{await K({...o}),s.value={type:"success",message:"Compte créé avec succès !"},p(!1)}catch(a){s.value={type:"error",message:b(a)}}finally{r.value=!1}}}return(a,e)=>{const g=U("RouterLink");return m(),d("section",N,[e[17]||(e[17]=t("header",{class:"major"},[t("h1",null,"Inscription"),t("p",null,"Créez votre accès à l'espace CAFE en quelques clics.")],-1)),t("form",{class:"register-form",onSubmit:k(y,["prevent"])},[t("div",B,[t("div",R,[e[8]||(e[8]=t("label",{for:"login"},"Identifiant",-1)),n(t("input",{id:"login","onUpdate:modelValue":e[0]||(e[0]=l=>o.login=l),type:"text",required:"",autocomplete:"username",placeholder:"ex : prenom.nom"},null,512),[[i,o.login,void 0,{trim:!0}]])]),t("div",z,[e[9]||(e[9]=t("label",{for:"email"},"Adresse e-mail",-1)),n(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=l=>o.email=l),type:"email",required:"",autocomplete:"email",placeholder:"adresse ens ou pas"},null,512),[[i,o.email,void 0,{trim:!0}]])]),t("div",E,[e[10]||(e[10]=t("label",{for:"prenom"},"Prénom",-1)),n(t("input",{id:"prenom","onUpdate:modelValue":e[2]||(e[2]=l=>o.prenom=l),type:"text",required:"",autocomplete:"given-name"},null,512),[[i,o.prenom,void 0,{trim:!0}]])]),t("div",I,[e[11]||(e[11]=t("label",{for:"nom"},"Nom",-1)),n(t("input",{id:"nom","onUpdate:modelValue":e[3]||(e[3]=l=>o.nom=l),type:"text",required:"",autocomplete:"family-name"},null,512),[[i,o.nom,void 0,{trim:!0}]])]),t("div",M,[e[12]||(e[12]=t("label",{for:"birthday"},"Date de naissance",-1)),n(t("input",{id:"birthday","onUpdate:modelValue":e[4]||(e[4]=l=>o.birthday=l),type:"date",required:"",autocomplete:"bday"},null,512),[[i,o.birthday]])]),t("div",S,[e[13]||(e[13]=t("label",{for:"noteKfet"},"Note Kfet (optionnel)",-1)),n(t("input",{id:"noteKfet","onUpdate:modelValue":e[5]||(e[5]=l=>o.noteKfet=l),type:"text",placeholder:"Oscilloscope"},null,512),[[i,o.noteKfet,void 0,{trim:!0}]])]),t("div",h,[e[14]||(e[14]=t("label",{for:"hpwd"},"Mot de passe",-1)),n(t("input",{id:"hpwd","onUpdate:modelValue":e[6]||(e[6]=l=>o.hpwd=l),type:"password",required:"",autocomplete:"new-password",placeholder:"Choisissez un mot de passe"},null,512),[[i,o.hpwd]])])]),e[15]||(e[15]=t("p",null,null,-1)),t("ul",A,[t("li",null,[t("button",{type:"submit",class:"button primary",disabled:r.value},u(r.value?"Création…":"Créer le compte"),9,D)]),t("li",null,[t("button",{type:"button",class:"button",onClick:e[7]||(e[7]=l=>p()),disabled:r.value}," Réinitialiser ",8,L)])])],32),s.value&&s.value.type=="success"?(m(),d("div",{key:0,class:v(["form-feedback",s.value.type]),role:"status"},[c(u(s.value.message)+" ",1),V(g,{class:"button Button_principal",to:"/Login"},{default:q(()=>[...e[16]||(e[16]=[c(" Connexion",-1)])]),_:1})],2)):s.value&&s.value.type=="error"?(m(),d("div",{key:1,class:v(["form-feedback",s.value.type]),role:"alert"},u(s.value.message),3)):C("",!0)])}}}),O=_(j,[["__scopeId","data-v-1446fb54"]]);export{O as default};
